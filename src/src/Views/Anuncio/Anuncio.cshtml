
@{
    ViewData["Title"] = "Anuncio";
}

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager


<h2>Anuncio CRUD</h2>
<div class="row">
    @if (SignInManager.IsSignedIn(User))
    {
        <div class="col-md-10">
            <a class="btn btn-success" style="margin-bottom:10px" onclick="ShowPopup('@Url.Action("AddEditAnuncio", "Anuncio")')"><i class="fa fa-plus"></i> Adicionar novo Anuncio</a>
        </div>
    }
    </div>
<div class="row">
    <div class="col-md-10">
        @if (SignInManager.IsSignedIn(User))
        {
            <table id="gridAnuncio" name="gridAnuncio" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th class="col-md-10">Anuncio</th>
                        <th class="col-md-10">Marca</th>
                        <th class="col-md-10">Modelo</th>
                        <th class="col-md-10">Ano</th>
                        <th class="col-md-10">Valor de Compra</th>
                        <th class="col-md-10">Valor de Venda</th>
                        <th class="col-md-10">Cor</th>
                        <th class="col-md-10">Tipo Combustível</th>
                        <th class="col-md-10">Data de Venda</th>
                        <th class="col-md-2"></th>
                    </tr>
                </thead>
            </table>
        }
        else
        {
            <table id="gridAnuncioUserOff" name="gridAnuncioUserOff" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th class="col-md-10">Anuncio</th>
                        <th class="col-md-10">Marca</th>
                        <th class="col-md-10">Modelo</th>
                        <th class="col-md-10">Ano</th>
                        <th class="col-md-10">Valor de Compra</th>
                        <th class="col-md-10">Valor de Venda</th>
                        <th class="col-md-10">Cor</th>
                        <th class="col-md-10">Tipo Combustível</th>
                        <th class="col-md-10">Data de Venda</th>
                    </tr>
                </thead>
            </table>
        }
    </div>
</div>
<script type="text/javascript">
    function Delete(id) {
        swal({
            title: "Tem certeza que deseja excluir?",
            text: "Não será possivel restaurar esse registro!",
            type: "warning",
            showCancelButton: true,
            confirmButtonColor: "#DD6B55",
            confirmButtonText: "Sim, exclua!",
            closeOnConfirm: true
        }, function () {
            $.ajax({
                type: 'DELETE',
                url: '/api/anuncio/' + id,
                success: function (data) {
                    if (data.success) {
                        ShowMessage(data.message);
                        dataTable.ajax.reload();
                    }
                }
            });
        });
    }

</script>

@section Scripts{
    @await Html.PartialAsync("_ValidationScriptsPartial")
    <script src="~/js/views/anuncio.js"></script>
}

